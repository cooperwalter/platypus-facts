service: platypus-facts

# Replace with your GitHub username before first deploy
image: ghcr.io/<your-github-username>/platypus-facts

servers:
  web:
    hosts:
      # Replace with your VPS IP address
      - <your-server-ip>
    options:
      network: kamal

registry:
  server: ghcr.io
  username:
    - KAMAL_REGISTRY_USERNAME
  password:
    - KAMAL_REGISTRY_PASSWORD

env:
  clear:
    PORT: 3000
    DATABASE_PATH: /app/data/platypus-facts.db
    DAILY_SEND_TIME_UTC: "14:00"
    MAX_SUBSCRIBERS: 1000
  secret:
    - BASE_URL
    - TWILIO_ACCOUNT_SID
    - TWILIO_AUTH_TOKEN
    - TWILIO_PHONE_NUMBER
    - OPENAI_API_KEY

volumes:
  - /opt/platypus-facts/data:/app/data
  - /opt/platypus-facts/images:/app/public/images/facts

proxy:
  ssl: true
  # Replace with your domain name
  host: <your-domain.com>
  app_port: 3000

healthcheck:
  path: /health
  port: 3000
  interval: 10
